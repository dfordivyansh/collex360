{% extends "base/base.html" %}
{% block signup %}{% endblock %}

{% block sidebar %}
<aside class="hidden md:flex fixed left-6 top-1/2 -translate-y-1/2 backdrop-blur-xl bg-white/10 border border-white/20 shadow-[0_8px_32px_rgba(0,0,0,0.6)] rounded-2xl py-8 px-6 flex-col items-center h-[60vh] w-22 z-40 transition">
  <div class="flex flex-col gap-8 w-full">
    <a href="/" class="w-14 h-14 flex items-center justify-center rounded-xl bg-white/10 border border-white/20 text-indigo-400 hover:bg-indigo-600 hover:text-white hover:scale-110 transition" title="Home">
      <i class="fas fa-house text-lg"></i>
    </a>
    <a href="{% url 'skills:generate' %}" class="w-14 h-14 flex items-center justify-center rounded-xl bg-white/10 border border-white/20 text-green-400 hover:bg-green-600 hover:text-white hover:scale-110 transition" title="Generate Roadmap">
      <i class="fas fa-plus text-lg"></i>
    </a>
    <a href="{% url 'skills:dashboard' %}" class="w-14 h-14 flex items-center justify-center rounded-xl bg-white/10 border border-white/20 text-yellow-400 hover:bg-yellow-600 hover:text-white hover:scale-110 transition" title="My Roadmaps">
      <i class="fas fa-map text-lg"></i>
    </a>
    <button onclick="history.back()" class="w-14 h-14 flex items-center justify-center rounded-xl bg-white/10 border border-white/20 text-red-400 hover:bg-red-600 hover:text-white hover:scale-110 transition" title="Go Back">
      <i class="fas fa-arrow-left text-lg"></i>
    </button>
  </div>
</aside>
{% endblock %}

{% block mobile_nav %}
<nav class="md:hidden fixed bottom-4 left-1/2 -translate-x-1/2 backdrop-blur-xl bg-white/10 border border-white/20 shadow-[0_8px_32px_rgba(0,0,0,0.4)] rounded-full px-8 py-3 flex justify-center gap-10 z-40">
  <a href="/" class="text-indigo-400 hover:text-white hover:scale-110 transition" title="Home"><i class="fas fa-house text-xl"></i></a>
  <a href="{% url 'skills:generate' %}" class="text-green-400 hover:text-white hover:scale-110 transition" title="Generate Roadmap"><i class="fas fa-plus text-xl"></i></a>
  <a href="{% url 'skills:dashboard' %}" class="text-yellow-400 hover:text-white hover:scale-110 transition" title="My Roadmaps"><i class="fas fa-map text-xl"></i></a>
  <button onclick="history.back()" class="text-red-400 hover:text-white hover:scale-110 transition" title="Go Back"><i class="fas fa-arrow-left text-xl"></i></button>
</nav>
{% endblock %}

{% block content %}
<div class="relative min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-950 via-gray-900 to-gray-950 overflow-hidden">
  <!-- Animated Background -->
  <canvas id="bgCanvas" class="absolute inset-0 w-full h-full"></canvas>

  <!-- Glassmorphic Card -->
  <div class="relative z-10 w-full max-w-3xl rounded-2xl backdrop-blur-lg bg-white/5 border border-indigo-400/20 shadow-2xl p-6 md:p-10 animate-fadeIn">
    
    <!-- Title -->
    <h2 class="text-3xl md:text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-green-400 via-blue-300 to-indigo-400 drop-shadow-lg text-center mb-6">
      <i class="fas fa-map text-yellow-400 mr-2"></i> Generate Your Roadmap
    </h2>

    <!-- Form -->
    <form method="post" class="space-y-6">
      {% csrf_token %}
      <div class="space-y-4 text-gray-200">
        {{ form.as_p }}
      </div>
      <div class="text-center">
        <button type="submit" class="px-6 py-3 rounded-lg bg-gradient-to-r from-green-500 to-indigo-500 text-white font-bold shadow-lg hover:scale-105 hover:shadow-xl transition">
          <i class="fas fa-magic mr-2"></i> Generate
        </button>
      </div>
    </form>

    <!-- Motivational Section -->
    <div class="mt-10 p-6 rounded-xl bg-gradient-to-r from-purple-700/30 via-indigo-800/20 to-blue-700/30 border border-indigo-400/20 shadow-lg text-center">
      <h3 class="text-xl font-bold text-indigo-300 mb-3">Stay Motivated</h3>
      <p id="quoteBox" class="text-lg text-gray-200 italic">"First, solve the problem. Then, write the code."</p>
    </div>

  </div>
</div>

<!-- Motivational Quotes -->
<script>
  const quotes = [
    "Code is like humor. When you have to explain it, it’s bad.",
    "The best error message is the one that never shows up.",
    "First, solve the problem. Then, write the code.",
    "Programming isn’t about what you know; it’s about what you can figure out.",
    "Every expert was once a beginner."
  ];
  let idx = 0;
  const quoteBox = document.getElementById("quoteBox");

  setInterval(() => {
    idx = (idx + 1) % quotes.length;
    quoteBox.classList.add("opacity-0");
    setTimeout(() => {
      quoteBox.innerText = quotes[idx];
      quoteBox.classList.remove("opacity-0");
    }, 700);
  }, 5000);
</script>

<!-- Three.js Background -->
<script src="https://cdn.jsdelivr.net/npm/three@0.154.0/build/three.min.js"></script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const canvas = document.getElementById("bgCanvas");
  const renderer = new THREE.WebGLRenderer({ canvas, alpha: true });
  renderer.setSize(window.innerWidth, window.innerHeight);

  const scene = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
  camera.position.z = 8;

  const geometry = new THREE.BufferGeometry();
  const positions = [];
  for (let i = 0; i < 2000; i++) {
    positions.push((Math.random() - 0.5) * 50);
    positions.push((Math.random() - 0.5) * 50);
    positions.push((Math.random() - 0.5) * 50);
  }
  geometry.setAttribute("position", new THREE.Float32BufferAttribute(positions, 3));

  const material = new THREE.PointsMaterial({ color: 0x6366f1, size: 0.05, transparent: true, opacity: 0.8 });
  const particles = new THREE.Points(geometry, material);
  scene.add(particles);

  function animate() {
    requestAnimationFrame(animate);
    particles.rotation.y += 0.0007;
    particles.rotation.x += 0.0003;
    renderer.render(scene, camera);
  }
  animate();

  window.addEventListener("resize", () => {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
  });
});
</script>
{% endblock %}
